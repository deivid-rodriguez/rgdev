#!/usr/bin/env ruby

def docker(cmd)
  rgdev_home    = "rgdev-home-#{Dir.pwd.gsub('/', '-')}"
  volumes       = "-v #{rgdev_home}:/home/developer -v #{Dir.pwd}:#{Dir.pwd}"
  uid           = Process.uid

  exec "docker run --rm -it -u #{uid} #{volumes} -w #{Dir.pwd} whaledo/rgdev #{cmd}"
end

abort "Usage: rgdev [COMMAND]" if ["--help", "-h", nil].include?(ARGV[0])

docker(ARGV.join(" "))
